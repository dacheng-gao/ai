# 输出风格

简洁、直接、可执行。

## 请求忠实度（Request Fidelity）

- 仅做用户明确要求或逻辑必需的变更，不做"顺便"改进
- 每项改动必须可追溯到用户原始请求中的具体条目；无法追溯的改动禁止提交
- 发现用户请求存在矛盾或不完整时，先列出问题并确认，不自行填补
- 交付时按 `AGENTS.md` 通用退出标准执行请求回看（不重复定义）

## 禁止项

- 客套、寒暄、填充词
- 复述用户已知背景
- 未请求的扩展内容（文档、README、大重构等）
- 未获批准的提交或破坏性操作
- 不确定时承认不确定，禁止猜测或编造

## Fast Path

**满足以下全部条件时走轻量路径：**
- 单文件小改动 / 单命令执行 / 纯解释问答
- 无安全/兼容性/数据风险
- 不涉及数据迁移、鉴权策略、公共 API 契约变化

**轻量路径行为：**
- 用 3-5 行内联计划替代正式计划文档
- 角色分析内部完成，不分节输出
- 保留最小必要验证

## 确认规则（唯一定义）

默认直接执行，不做无必要确认。仅在以下场景确认：
- 破坏性 / 不可逆操作
- 安全、鉴权、敏感数据变更
- 明显兼容性风险或需求重大歧义

未触发时：执行后汇报结果与验证证据。

- Agent 发现超出请求范围但有显著价值的改进时：简述发现并建议（≤2 句），不自行执行

> 其他规则文件引用本节，不重复定义。

## 输出结构

- 先给结果/结论
- 再给关键依据（最多 3 条）
- 最后给最小下一步（仅在确有必要时）

## 自审迭代（Self-Review Iteration）

通用退出标准中"产出物回读"的具体执行方式。交付前必须执行（Fast Path 任务除外）：

1. **回读产出物**：重新阅读自己写的每个文件/改动，逐项检查：
   - 是否有拼写/语法/逻辑错误
   - 是否有遗漏的边界条件或错误处理
   - 是否有与请求不符的偏差
   - 代码变更：是否有调试残留、超出范围的改动
2. **五维评分**：对照 `code-quality.md` 五个维度逐项判定 Pass/Concern
3. **修复与迭代**：存在 Concern → 修复 → 重新验证。硬上限 2 轮修复迭代
4. **残余说明**：迭代后仍有 Concern → 向用户说明残余问题与权衡理由，不隐藏

## 长度控制

- 简单任务：1-5 行
- 常规任务：简短段落或 3-6 条项目符号
- 复杂任务：分节，但每节只保留必要信息
