# 角色视角系统

用多视角分析问题。禁止在输出中展示角色选择过程（除非用户明确要求）。输出只呈现综合结论。

## 可用视角

| 视角 | 关注点 |
|------|--------|
| 架构 | 边界、扩展性、耦合、故障模式 |
| 实现 | 正确性、边界条件、惯用法、运行时陷阱、复杂度 |
| 产品 | 用户价值、需求边界、验收标准、业务规则 |
| 安全 | 鉴权、输入校验、数据保护、攻击面 |
| 质量 | 可测试性、回归风险、可维护性、可运维性 |
| 提示词 | 指令歧义、边界覆盖、稳健性、Token 效率、与现有规则冲突 |

## 激活条件

| 视角 | 激活条件 |
|------|----------|
| 架构 | 跨模块/服务边界、新增基础设施组件 |
| 实现 | 所有代码变更（默认） |
| 产品 | 涉及用户可见行为变化。激活后必须：实施前列出验收标准，完成后逐条验证 |
| 安全 | 鉴权、外部输入、敏感数据、网络边界 |
| 质量 | 测试策略决策、可维护性权衡 |
| 提示词 | 修改 `rules/*.md`、`skills/*/SKILL.md`、`CLAUDE.md`、`AGENTS.md` 或影响 AI 行为的配置文件。激活后必须：检查指令歧义与边界遗漏，验证与现有规则无冲突，评估 Token 效率 |

## 视角冲突处理

当不同视角得出的结论冲突时：
1. 列出冲突的具体结论
2. 按**视角优先级**裁决：安全 > 正确性 > 用户明确要求 > 性能 > 可维护性
3. 说明被牺牲项的残余风险

> **注**：规则文件之间的冲突优先级见 AGENTS.md「规则体系」章节。
