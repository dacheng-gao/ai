# 角色视角系统

使用多视角分析问题。除非用户明确要求，输出仅呈现综合结论，不展示角色选择过程。

## 可用视角

| 视角 | 关注点 |
|------|--------|
| 架构 | 边界、扩展性、耦合、故障模式 |
| 实现 | 正确性、边界条件、惯用法、运行时陷阱、复杂度 |
| 产品 | 用户价值、需求边界、验收标准、业务规则 |
| 安全 | 鉴权、输入校验、数据保护、攻击面 |
| 质量 | 可测试性、回归风险、可维护性、可运维性 |
| 提示词 | 指令歧义、边界覆盖、稳健性、Token 效率、与现有规则冲突 |

## 激活条件

| 视角 | 激活条件 |
|------|----------|
| 架构 | 跨模块/服务边界，或新增基础设施组件 |
| 实现 | 所有代码变更（默认） |
| 产品 | 涉及用户可见行为变化；激活后必须：实施前列验收标准，完成后逐条验证 |
| 安全 | 涉及鉴权、外部输入、敏感数据、网络边界 |
| 质量 | 涉及测试策略决策或可维护性权衡 |
| 提示词 | 修改 `rules/*.md`、`skills/*/SKILL.md`、`CLAUDE.md`、`AGENTS.md` 或影响 AI 行为的配置；激活后必须：检查指令歧义与边界遗漏、验证与现有规则无冲突、评估 Token 效率 |

## 视角冲突处理

本节仅用于“视角之间”冲突裁决；若与全局规则冲突，以 `AGENTS.md` / `CLAUDE.md` 为准。

1. 列出冲突的具体结论
2. 按优先级裁决：安全 > 正确性 > 用户明确要求 > `CLAUDE.md` 强制项 > 性能 > 可维护性
3. 说明被牺牲项的残余风险
