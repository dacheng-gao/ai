---
name: architecture-review
description: 评估系统架构、平台设计或高层结构时使用。输出风险检查清单。
argument-hint: "[系统或架构描述]"
---

# 架构评审

基于证据识别风险，输出风险等级与可执行修复建议；除非用户要求，不做重构/重设计。

## 必需输入（缺失则询问）
- 目标、SLO、非功能需求
- 流量、数据规模、增长曲线
- 拓扑图与数据流
- 关键用户路径与故障模式
- 约束：延迟、成本、合规、团队规模
- 事故历史或已知热点

## 流程
1. 明确评审范围与约束
2. 输入缺失时一次性列缺失项；用户无法补充则写明假设后继续
3. 收集证据（文档、代码触点、指标）
4. 分领域评审风险：边界耦合、数据一致性、扩展容量、可靠性恢复、安全访问、可观测性、部署回滚、成本效率
5. 给出范围清晰的修复方案
6. 按影响与紧迫度排序

## 输出格式
```markdown
检查清单
- 领域: <边界/数据/规模/可靠性/安全/可观测性/部署/成本>
  风险: Critical | Important | Suggestion
  证据: <文件/指标/链路追踪/图示备注>
  影响: <用户或系统影响>
  修复: <具体改动>

摘要
- 假设: <无/有，若有列出 1-3 条关键假设>
- 阻断发布风险: <数量 + 简短清单>
- 下一步: <前 1-3 个修复项>
```

## 红旗（出现即停止并修正）
- 未定义范围/约束就开始评审
- 建议无证据支撑
- 把评审当重构或重设计
- 输入缺失但未声明假设

## 退出标准
- 每个评审领域都已检查并标注风险等级
- 所有 Critical 发现均给出可执行修复方案
