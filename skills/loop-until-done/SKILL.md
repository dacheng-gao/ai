---
name: loop-until-done
description: 不匹配专项技能时的默认工作流：计划→执行→验证→补缺。
---

# 迭代直到完成

默认工作流：理解需求 → 计划 → 执行 → 按通用退出标准验证并迭代。

## 触发条件

本技能为**默认工作流**，当请求满足以下任一条件时使用：

1. **需要执行变更**但无法匹配到专项技能（develop-feature/fix-bug/refactor）
2. **路由不明确**，无法确定应该使用哪个专项技能
3. **多轮迭代任务**，需要计划→执行→验证的完整流程

## 工作流

### 1. 理解需求
激活适用视角

### 2. 明确目标
- 将请求转为可验证目标（如"优化性能" → "降低 p95 latency → 具体指标"）
- 写清成功标准（可量化时量化）
- 定义范围边界（不做哪些）
- 涉及多文件/模块时列出影响范围

### 3. 计划
- ≥5 步或跨模块 → Claude Code 用 Plan Mode（EnterPlanMode），非 Claude Code 用 `superpowers:writing-plans`
- 简单任务（≤4 步、单模块）→ 内联 3-5 行编号列表（每行：`N. [动作] [对象]`）

### 4. 执行
按计划完成改动或分析

### 5. 验证迭代
按通用退出标准验证，未通过则修复后重新检查（上限3轮）

## Agent 协作

| 场景 | Agent | 用途 |
|------|-------|------|
| 需要多轮搜索理解代码库 | `researcher` | 探索架构/数据流 |
| 代码变更后验证 | `verifier` | typecheck + lint + test |
| 非 Claude Code 环境需要计划 | `planner` | 生成实施计划 |
