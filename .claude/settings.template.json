{
  "permissions": {
    "allow": [
      "Read",
      "Glob",
      "Grep",
      "Write",
      "Edit",
      "WebSearch",
      "WebFetch",
      "Task",
      "TaskCreate",
      "TaskList",
      "TaskUpdate",
      "TaskGet",
      "Bash(git status*)",
      "Bash(git diff*)",
      "Bash(git log*)",
      "Bash(git branch*)",
      "Bash(git show*)",
      "Bash(git blame*)",
      "Bash(gh issue view*)",
      "Bash(gh pr view*)",
      "Bash(gh api*)",
      "Bash(GIT_PAGER=cat git diff*)",
      "Bash(GIT_PAGER=cat git log*)",
      "Bash(npm test*)",
      "Bash(npm run test*)",
      "Bash(npm run build*)",
      "Bash(npm run lint*)",
      "Bash(npm run typecheck*)",
      "Bash(npx tsc*)",
      "Bash(npx vitest*)",
      "Bash(npx jest*)",
      "Bash(npx eslint*)",
      "Bash(cargo test*)",
      "Bash(cargo check*)",
      "Bash(cargo clippy*)",
      "Bash(cargo build*)",
      "Bash(go test*)",
      "Bash(go vet*)",
      "Bash(go build*)",
      "Bash(pytest*)",
      "Bash(python -m pytest*)",
      "Bash(mypy*)",
      "Bash(ruff*)"
    ],
    "deny": [
      "Bash(rm -rf *)",
      "Bash(git push --force*)",
      "Bash(git reset --hard*)",
      "Bash(git clean -f*)",
      "Write(.env*)",
      "Write(**/credentials*)",
      "Write(**/*.pem)",
      "Write(**/*.key)",
      "Edit(.env*)",
      "Edit(**/credentials*)",
      "Edit(**/*.pem)",
      "Edit(**/*.key)",
      "Bash(curl *| sh*)",
      "Bash(curl *| bash*)",
      "Bash(wget *| sh*)",
      "Bash(wget *| bash*)"
    ]
  },
  "hooks": {
    "PreCompact": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "${HOME}/.claude/hooks/pre-compact.sh"
          }
        ]
      }
    ],
    "SessionStart": [
      {
        "matcher": "compact",
        "hooks": [
          {
            "type": "command",
            "command": "${HOME}/.claude/hooks/post-compact.sh"
          }
        ]
      },
      {
        "matcher": "startup",
        "hooks": [
          {
            "type": "command",
            "command": "${HOME}/.claude/hooks/session-start.sh"
          }
        ]
      }
    ],
    "PreToolUse": [
      {
        "matcher": "Write",
        "hooks": [
          {
            "type": "command",
            "command": "${HOME}/.claude/hooks/pre-write-check.sh",
            "timeout": 10
          }
        ]
      },
      {
        "matcher": "Edit",
        "hooks": [
          {
            "type": "command",
            "command": "${HOME}/.claude/hooks/pre-write-check.sh",
            "timeout": 10
          }
        ]
      }
    ],
    "Stop": [
      {
        "hooks": [
          {
            "type": "prompt",
            "prompt": "Check the assistant's last reply. Return ONLY raw JSON with no markdown, no code blocks, no explanation.\n\nRules:\n- Rule 1: If reply is Q&A, clarification, intermediate step, or plan/suggestion only → return {\"ok\":true}\n- Rule 2: If reply claims completion of code change/feature/bugfix → check for (a) completion status of each requirement AND (b) verification command with output. Both present → {\"ok\":true}. Missing → {\"ok\":false,\"reason\":\"Missing: (missing items)\"}\n\nOutput format: {\"ok\":boolean} or {\"ok\":false,\"reason\":\"string\"}\nNo other text allowed.",
            "model": "sonnet"
          }
        ]
      }
    ]
  }
}
